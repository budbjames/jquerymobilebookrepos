////

HTML5 geolocation

Author: Roberto Hernandez <rhernandez@overridethis.com>

////

10.2 HTML5 geolocation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Problem
++++++++++++++++++++++++++++++++++++++++++++
Getting the users geolocation using HTML5.

Solution
++++++++++++++++++++++++++++++++++++++++++++

<div id="main" data-role="page">
    <div data-role="header">
        <h1>HTML5 GeoLocation</h1>
    </div>
    <div data-role="content">
        <div id="error" class="ui-bar ui-bar-e">
            HTML5 GeoLocation Failed
        </div>
        <ul data-role="listview" data-inset="true">
            <li data-role="list-divider">GeoLocation</li>
            <li id="lat">Latitude: 0</li>
            <li id="long">Longitude: 0</li>
        </ul>
    </div>
</div>
<script type="text/javascript">
  $("#main").on("pageinit", function() { 
    $("#error").hide();
        
    function error(msg) {
      $("#error").text("HTML5 GeoLocation failed " + msg);
      $("#error").show();
    }

    function success(position) {
      $("#lat").text("Latitude: {0}".replace("{0}", position.coords.latitude));
      $("#long").text("Longitude: {0}".replace("{0}", position.coords.longitude));
    }

    // is html5 geolocation supported
    if(navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(success, function() { $("#error").show(); });
    } else {
      $("#error").show();
    }
  });
</script>


Discussion
++++++++++++++++++++++++++++++++++++++++++++

